<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layouts/communityLayout}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<div layout:fragment="content">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="/css/shorts.css">
    <div>
        <a type="button">업로드</a>
    </div>
    <div class="slide-container">
        <div class="wrapper">
            <div class="clash-card barbarian">
                <div class="clash-main">
                    <video controls width="100%" height="100%" id="testVideo">
                        <source th:src="'/video/9db4f067-2247-413c-a184-4dd9928b5613_25분만에 끝내는 인공지능 기초와 활용 및 사례 (ㄹㅇ블루오션).mp4'"
                                type="video/mp4">
                    </video>
                </div>

                <div class="clash-card__unit-stats clash-card__unit-stats--archer clearfix">
                    <div class="one-third">
                        <div class="stat">구독</div>
                        <div class="stat-value"></div>
                    </div>

                    <div class="one-third">
                        <div class="stat">댓글</div>
                        <div class="stat-value">250</div>
                    </div>

                    <div class="one-third no-border">
                        <div class="stat"><i class="bi bi-suit-heart"></i></div>
                        <div class="stat-value">300</div>
                    </div>

                </div>

            </div> <!-- end clash-card archer-->
        </div> <!-- end wrapper -->

        <div class="wrapper">
            <div class="clash-card archer">
                <div class="clash-main">
                    <video controls width="100%" height="100%" id="testVideo2">
                        <source th:src="'/video/a3f5ff0e-1bbe-4932-b1d1-0aa7ca6771a6_React 기초 0강 _ 리액트왜 쓰는지 알려줌 (+ 수강시 필요 사전지식).mp4'"
                                type="video/mp4">
                    </video>
                </div>
                <div class="clash-card__unit-stats clash-card__unit-stats--archer clearfix">
                    <div class="one-third">
                        <div class="stat">구독</div>
                        <div class="stat-value"></div>
                    </div>

                    <div class="one-third">
                        <div class="stat">댓글</div>
                        <div class="stat-value">250</div>
                    </div>

                    <div class="one-third no-border">
                        <div class="stat"><i class="bi bi-suit-heart" id="test"></i></div>
                        <div class="stat-value">300</div>
                    </div>
                    <input type="hidden" id="heart" th:value="${heart}">

                </div>

            </div> <!-- end clash-card archer-->
        </div> <!-- end wrapper -->

        <div class="wrapper">
            <div class="clash-card giant">
                <div class="clash-main">
                    <video controls width="100%" height="100%" id="testVideo3">
                        <source th:src="'/video/77901baf-b0c7-40f4-9f25-2b40347505a1_자바스크립트 라이브러리 리액트 (React Component, Props, State, 최신 코드 예제).mp4'"
                                type="video/mp4">
                    </video>                </div>
                <div class="clash-card__unit-stats clash-card__unit-stats--archer clearfix">
                    <div class="one-third">
                        <div class="stat">구독</div>
                        <div class="stat-value"></div>
                    </div>

                    <div class="one-third">
                        <div class="stat">댓글</div>
                        <div class="stat-value">250</div>
                    </div>

                    <div class="one-third no-border">
                        <div class="stat"><i class="bi bi-suit-heart"></i></div>
                        <div class="stat-value">300</div>
                    </div>

                </div>

            </div> <!-- end clash-card archer-->
        </div> <!-- end wrapper -->

        <div class="wrapper">
            <div class="clash-card goblin">
                <div class="clash-main">
                    <video controls width="100%" height="100%" id="testVideo4">
                        <source th:src="'/video/ebadaa4c-b342-4fff-a260-307040afd540_자바스크립트 라이브러리 리액트 (React Component, Props, State, 최신 코드 예제).mp4'"
                                type="video/mp4">
                    </video>
                </div>
                <div class="clash-card__unit-stats clash-card__unit-stats--archer clearfix">
                    <div class="one-third">
                        <div class="stat">구독</div>
                        <div class="stat-value"></div>
                    </div>

                    <div class="one-third">
                        <div class="stat">댓글</div>
                        <div class="stat-value">250</div>
                    </div>

                    <div class="one-third no-border">
                        <div class="stat"><i class="bi bi-suit-heart"></i></div>
                        <div class="stat-value">300</div>
                    </div>

                </div>

            </div> <!-- end clash-card archer-->
        </div> <!-- end wrapper -->

        <div class="wrapper">
            <div class="clash-card wizard">
                <div class="clash-main">
                    <video controls width="100%" height="100%" id="testVideo5">
                        <source th:src="'/video/28462468-2fd3-4c7b-80a5-88f141dd05c6_[알고리즘] 카카오 코딩 테스트 #1.mp4'"
                                type="video/mp4">
                    </video>
                </div>
                <div class="clash-card__unit-stats clash-card__unit-stats--archer clearfix">
                    <div class="one-third">
                        <div class="stat">구독</div>
                        <div class="stat-value"></div>
                    </div>

                    <div class="one-third">
                        <div class="stat">댓글</div>
                        <div class="stat-value">250</div>
                    </div>

                    <div class="one-third no-border">
                        <div class="stat"><i class="bi bi-suit-heart"></i></div>
                        <div class="stat-value">300</div>
                    </div>

                </div>

            </div> <!-- end clash-card archer-->
        </div> <!-- end wrapper -->
    </div> <!-- end container -->
    <script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
            crossorigin="anonymous"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <script type="text/javascript">
        $.noConflict();
    </script>
    <script th:inline="javascript">
        $(document).ready(function () {
            let count = 0;

            var slideContainer = $('.slide-container');

            slideContainer.slick({
                nextArrow: $('.next'),
                prevArrow: $('.prev'),
            });

            $('.clash-card__image img').hide();
            $('.slick-active').find('.clash-card img').fadeIn(200);

            // On before slide change
            slideContainer.on('beforeChange', function (event, slick, currentSlide, nextSlide) {
                $('.slick-active').find('.clash-card img').fadeOut(1000);

            });

            // On after slide change
            slideContainer.on('afterChange', function (event, slick, currentSlide) {
                $('.slick-active').find('.clash-card img').fadeIn(200);
            });


            var heart = document.getElementById('heart').value;
            var type = document.getElementById('test').className;
            if (heart == 1) {
                document.getElementById('test').className = 'bi bi-suit-heart-fill';

            } else {
                document.getElementById('test').className = 'bi bi-suit-heart';

            }
        })
    </script>

    <script>
        //하트 버튼 클릭 시
        $('#btnTest').on('click', function (e) {
            var type = document.getElementById('test').className;
            var id = document.getElementById('id').value;
            //좋아요가 눌러진 상태에서 한 번 더 누른다면
            if (type == 'bi bi-suit-heart-fill') {
                var heart = 0;
                //className을 bi bi-suit-heart로 변경 해 좋아요가 안눌러진 그림으로
                document.getElementById('test').className = 'bi bi-suit-heart';
                //ajax 처리를 통해 communityController의 comheart 호출(좋아요 상태를 db에 전달)
                $.ajax({
                    url: "/community/comheart",
                    type: "post",
                    data: {
                        id: id,
                        heart: heart,
                    }
                })
            } else {
                var heart = 1;
                document.getElementById('test').className = 'bi bi-suit-heart-fill';
                $.ajax({
                    url: "/community/comheart",
                    type: "post",
                    data: {
                        id: id,
                        heart: heart,
                    }
                })
            }
        });
    </script>
</div>
</html>